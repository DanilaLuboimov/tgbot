<h1 align="center">Too Easy Travel BOT</h1>
<p align="center">
    <img src="https://propuskator.com/wp-content/uploads/2021/06/upravlenie-ustrojstvami-2smart-cloud-s-pomoshhyu-telegram-bota.png" width="262" height="196">
</p>

***
![](https://img.shields.io/badge/python-3.10-orange) ![](https://img.shields.io/badge/pip-22.1.2-orange)
![](https://img.shields.io/badge/requests-2.28.0-orange)
![](https://img.shields.io/badge/pyTelegramBotAPI-4.6.0-blue) ![](https://img.shields.io/badge/python--dotenvBotAPI-0.20.0-blue)
![](https://img.shields.io/badge/python--telegram--bot--calendar-1.0.5-blue) ![](https://img.shields.io/badge/deep--translator-1.8.3-yellow)
 ![](https://img.shields.io/badge/loguru-0.6.0-yellow) 
![](https://img.shields.io/badge/psycopg2-2.9.3-green)
***
##Краткое описание
<ul>
Телеграм бот подбирает отели, по заданным пользователем критериям, на сайте 
[Hotels.com](https://www.hotels.com) \
В разработке используется открытый **API Hotels**, который расположен на сайте
[rapidapi.com](https://rapidapi.com/apidojo/api/hotels4/)

Работа бота строится на специальных командах:\
● `/lowprice` — Самые дешёвые отели в городе \
● `/highprice` — Самые дорогие отели в городе \
● `/bestdeal` — Отели, наиболее подходящие по цене и 
расположению от центра города \
● `/history` — Вывод истории поиска отелей
</ul>

***
## Установка
Код проекта реализован на python 3.10 \
Запуск проекта:
1. Создать папку под проект у себя на компьютере или сервере
2. Склонировать репозиторий проекта в созданную папку
3. Чтобы установить все внешние библиотеки, необходимо набрать команду в 
   терминале проекта \
    ```pip install -r requirements.txt```
4. Создать файл ".env" и заполните его
    ```
    BOT_TOKEN = "Ваш токен для бота, полученный от @BotFather"
    RAPID_API_KEY = "Ваш ключ полученный от API по адресу rapidapi.com/apidojo/api/hotels4/"
    host = "IP вашего сервера, где находится база данных"
    user = "Имя пользователя, для подключения к базе данных"
    password = "Пароль пользователя, для подключения к базе данных"
    db_name = "Имя базы данных на вашем сервере"
    port=int(Порт сервера, на котором находится ваша база данных)
    ```
***
##Описание работы команд

###Команда _/lowprice_
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
    1. Так как сервис не поддерживает, в данный момент, русский язык, то в 
       случае если пользователь написал название города по-русски, текст 
       переводится на английский и уже тогда ищет id города.
    2. После успешного поиска просит пользователя подтвердить искомый город.
    3. В случае отрицательного ответа, бот просит ввести другой город. 
2. Запрашиваются даты предполагаемого въезда и выезда из отеля.
3. Количество отелей, которые необходимо вывести в результате (не больше
заранее определённого максимума).
4. Необходимость загрузки и вывода фотографий для каждого отеля («Да/Нет»):
   При положительном ответе пользователь также вводит количество
   необходимых фотографий (не больше заранее определённого
   максимума).

###Команда _/highprice_
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
    1. Так как сервис не поддерживает, в данный момент, русский язык, то в 
       случае если пользователь написал название города по-русски, текст 
       переводится на английский и уже тогда ищет id города.
    2. После успешного поиска просит пользователя подтвердить искомый город.
    3. В случае отрицательного ответа, бот просит ввести другой город. 
2. Запрашиваются даты предполагаемого въезда и выезда из отеля.
3. Количество отелей, которые необходимо вывести в результате (не больше
заранее определённого максимума).
4. Необходимость загрузки и вывода фотографий для каждого отеля («Да/Нет»):
   1. При положительном ответе пользователь также вводит количество
   необходимых фотографий (не больше заранее определённого
   максимума).

###Команда _/bestdeal_
После ввода команды у пользователя запрашивается:
1. Город, где будет проводиться поиск.
    1. Так как сервис не поддерживает, в данный момент, русский язык, то в 
       случае если пользователь написал название города по-русски, текст 
       переводится на английский и уже тогда ищет id города.
    2. После успешного поиска просит пользователя подтвердить искомый город.
    3. В случае отрицательного ответа, бот просит ввести другой город. 
2. Диапазон цен.
3. Диапазон расстояния, на котором находится отель от центра.
4. Количество отелей, которые необходимо вывести в результате (не больше
заранее определённого максимума).
5. Запрашиваются даты предполагаемого въезда и выезда из отеля.
6. Необходимость загрузки и вывода фотографий для каждого отеля («Да/Нет»):
   1. При положительном ответе пользователь также вводит количество
   необходимых фотографий (не больше заранее определённого
   максимума).

###Команда _/history_
После ввода команды пользователю выводится история поиска отелей. Сама история
содержит:
1. Команду, которую вводил пользователь.
2. Дату и время ввода команды.
3. Отели, которые были найдены со ссылками на эти отели.
***
## Описание внешнего вида и UI
Окно Telegram-бота при запущенном Python-скрипте воспринимает следующие команды: 
+ `/help` — помощь по командам бота
+ `/lowprice` — вывод самых дешёвых отелей в городе
+ `/highprice` — вывод самых дорогих отелей в городе 
+ `/bestdeal` — вывод отелей, наиболее подходящих по цене и расположению от 
  центра
+ `/history` — вывод истории поиска отелей

Для команд lowprice, highprice и bestdeal сообщение с результатом содержит краткую информацию по каждому отелю. 
В эту информацию входит: 
+ N фотографий отеля (если пользователь счёл необходимым их вывод)
+ Название отеля
+ Адрес
+ Расстояние до центра города
+ Общая цена за все время прибывание в отеле 
+ Цена за одну ночь
+ Гиперссылка на страницу Hotels.com по критериям запроса пользователя
***
